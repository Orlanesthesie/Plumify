{% extends 'base.html.twig' %}

{% block title %}Home
{% endblock %}

{% block body %}
		{% for label, messages in app.flashes %}
			<div class="alert alert-{{ label }}">
				{% for message in messages %}
					<p>{{ message }}</p>
				{% endfor %}
			</div>
		{% endfor %}
		
	<section id="popular" class="mb-5">
            <h2 class="quando">Popular Books</h2>
            <div class="row d-flex justify-content-around">
                {% for book in popularBooks %}
                    <div class="col-md-2 ">
                        <a href="{{ path('book_show', { id: book.id }) }}">
								<img src="{{ asset('/assets/images/books/' ~ book.coverImage) }}" class="rounded rounded-5" alt="Couverture de {{ book.title }}" style="width:200px; height:300px;">
							</a>
                    </div>
                {% endfor %}
            </div>
        </section>

	<section id="newest">
		<h2 class="quando">Newest</h2>
			<div id="books-news" class="px-5">
			{% for book in newBooks %}
				<div class="card mb-5 second-color d-flex flex-column rounded rounded-5">
					<div class="row g-0 flex-grow-1">
						<div class="col-md-4">
							<a href="{{ path('book_show', { id: book.id }) }}">
								<img src="{{ asset('/assets/images/books/' ~ book.coverImage) }}" class="rounded rounded-5" alt="Couverture de {{ book.title }}" style="width:200px; height:300px;">
							</a>
						</div>
						<div class="col-md-8 d-flex flex-column">
							<div class="card-body d-flex justify-content-between">
								<div class="d-flex flex-column">
									<small class="text-body-secondary">
										{{ book.author.firstname }} {{ book.author.lastname }}
									</small>
									<a href="{{ path('book_show', { id: book.id }) }}">
									<h3 class="card-title mt-2 quando">{{ book.title }}</h3>
									</a>
									<p class="card-text mt-2">{{ book.description }}</p>
									<div class="mt-auto">
										{% for category in book.category %}
											<a href="{{ path('category_show', { 'id': category.id }) }}" class=" btn btn-outline-dark mx-2">{{ category.name }}</a>
										{% endfor %}
									</div>
								</div>
								<div class="d-flex ">
									<p class="mt-2 mb-0" style="font-size: 1.2rem;">
										<i class="fa-solid fa-heart"></i>
										<span id="likes-count">{{ book.getLikedByUsers()|length }}</span>
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			{% endfor %}
			</div>
	</section>

	<h3>FOOTER</h3>


{% endblock %}

